# Cуществующие и потенциальные проблемные места

### 1. Существующие проблемные места

Для начала стоит провести "анамнез" приложения и понять основные причины возникновения проблем.

- Купленный софт MES
- Компания начала осваивать новые рынки сбыта. Это означает новые районы доставки, клиенты с более широкими требованиями.
- Производство справляется с заказамми, значит проблема не в производстве.
- Получение заказов от посредников. Увеличение цепочек коммуникации продавец - компания - (продавец - клиент)\клиент
- Кратное увеличение заказов после открытия в мир MES системы для просчетов заказов. Как следствие - увеличение жалоб от текущих и сторонних клиентов
- Увеличение жалоб от операторов MES на долгое открытие страницы
- Пагинация и фильтра в системе не помогли - страница все еще открывается долго
- Операторам важно видеть новые заказы
- Ручное тестирование фичей
- Есть возможность донайма
- Зажержки релизов 1+ месяц

Из описания можно сделать вывод, что есть 3 основные системы приложения: Интернет магазин, CRM, MES.
После анализа проблем, становится понятно, что с интернет магазином и CRM либо проблем нет, либо они незначительные по сравнению с MES.

Рассмотрим существующие проблемные места, сконцентривовщись на MES:

**MES:**

- MES - это купленный софт, поэтому команда может не знать, как работает система, либо может разбираться в компонентах системы дольше среднего.
- Учитывая, что MES написан на C# и в команде 1 разработчик на C# и 1 тимлид, которые его знает, это становится боттлнеком при деливери бизнес ценностей.
- Разработчик только 1, он может заболеть, уволиться, взять дейоф или просто не прийти на работу, в связи с чем разработка может остановиться.
- На 1 системе завязано большое количество процессов и людей. Через нее происходит просчет заказов и изменение статусов операторов. Учитывая, что
системой пользуются большое количество людей и каждый раз система долго реагирует на запросы - увеличивается период прохождения заказа в системе.
- Из описания не ясно, что влияет на отсутствие доставки или долгую доставку, поэтому примем в расчет то, что система долго реагирует на изменение состояния заказа, либо в ней содержатся баги, которые влияют на дальнейшее движение заказа.

**Тестирование:**

- Тестирование выстроено вручную, поэтому перед каждым релизом необходимо провести несколько этапов тестировния, от тестирования в ветке, до смоуков и регрессов на релизе и мастере. 
- Нет фича тоглов и канареечного деплоя, поэтому при деплое как фичи, так и потенциальные баги могут распространиться сразу на всех пользователей.

### 2. Потенциальные проблемные места

**Сервисы:**
- Некоторые сервисы имеют синхронное взаимодействие
- Неизвестно про наличие логов, метрик и трассировки
- Потениальные проблемы в потере заказов или неактуальности статусов

**Найм:**
- Есть вероятность остаться без рабочих рук, в случае отсутствия разработчика или девопса.
- Не должно быть незаменяемых членов команды, поэтому нужно либо шарить ответственность, либо донанимать людей.

# Инициативы для устранения нежелательных ситуаций

- Разобраться с логами и метриками. Внедрить трассировку.
- Выяснить причины потери заказов или долгой логистики
- Выяснить узкие точки при прохождении заказа.
- Распил MES системы на отдельные компоненты по DDD.
- Донайм девопса для более быстрого деливери фичей и повышения надежности, безопасности и наблюдаемости системы.
- Донайм разработчика и более быстрого распила MES.
- Найм системного аналитика для глубокого анализа задач перед разработкой
- Найм автотестировщика.
- Внедрение автотестов.
- Внедрить отображение только новых заказов со скоростью отдачи < 100 ms
- Внедрить систему конфигурирования для использования фича тоглов
- Внедрить канареечный деплой
- Нет понятной документации. Задокументировать компоненты системы

# Инициативы в порядке приоритета

### 1. Видение архитектуры через полгода

Через полгода в целом архитектура может остаться такой же, за исключением MES. Система должна быть поделена на компоненты,
Каждые из которых отвечает за свою зону ответственности:
- Расчет стоимости заказов
- Взаимодействие с заказами, а именно: просмотр, изменение статусов, начначение операторов

Добавить асинхронное взаимодействие между компонентами. Полгода может быть мало для внедрения сложных архитектурных паттернов,
поэтому можно только начать двигаться в эту сторону. 
- Внедрение кеширования для повышения отзывчивости
- Внедрение паттерна Backpressure для увеличения отказоустойчивости.

### 2. 3 важнейших задачи на полгода

Очевидно, что в первую очередь нужно разобраться со следующими проблемами:

- Поиск и фиксация проблем с потерянными заказами и долгой логистикой(должно включать задачи по обзервабилити, такие как трейсинг, метрики и логирование)
- Распил MES для повышения отзывчивости системы
- Внедрение автотестирования для ускорения релизных циклов
- Найм должен быть открыт фоном.